<!-- Esto es como tu cuaderno mÃ¡gico âœ¨ -->
<!DOCTYPE html>
<html>
<head>
    <title>Finca CafÃ© MÃ¡gico ğŸŒ±</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .seccion { background: #e0f7fa; padding: 20px; margin: 10px; border-radius: 10px; }
        input, button { margin: 5px; padding: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #4CAF50; padding: 8px; }
    </style>
</head>
<body>

<!-- PRIMERA PÃGINA: Info General -->
<div class="seccion">
    <h2>ğŸ  Casa de la Finca</h2>
    <input type="text" id="nombre" placeholder="Nombre de la finca">
    <input type="number" step="0.01" id="area" placeholder="Ãrea total (ha)">
    <!-- MÃ¡s campos aquÃ­... -->
</div>

<!-- TIENDA DE JUGUETES: Insumos -->
<div class="seccion">
    <h2>ğŸ›’ Compras de Insumos</h2>
    <input type="date" id="fechaCompra">
    <input type="text" id="insumo" placeholder="Nombre del insumo">
    <input type="number" step="0.01" id="cantidadCompra" placeholder="Cantidad">
    <button onclick="comprarInsumo()">ğŸ›’ Agregar</button>
</div>

<!-- BODEGA MÃGICA -->
<div class="seccion">
    <h2>ğŸ“¦ Bodega de Insumos</h2>
    <table id="tablaBodega">
        <tr><th>Insumo</th><th>Cantidad</th></tr>
    </table>
</div>

<!-- LOTES DE JUEGO -->
<div class="seccion">
    <h2>ğŸŒ± Lotes de CafÃ©</h2>
    <input type="text" id="numLote" placeholder="NÃºmero de lote">
    <input type="number" step="0.01" id="areaLote" placeholder="Ãrea (ha)" oninput="calcularPlantas()">
    <input type="number" step="0.01" id="distanciaCalles" placeholder="Distancia calles (m)" oninput="calcularPlantas()">
    <input type="number" step="0.01" id="distanciaPlantas" placeholder="Distancia plantas (m)" oninput="calcularPlantas()">
    <input type="text" id="densidad" placeholder="Densidad" readonly>
    <input type="text" id="numPlantas" placeholder="Plantas totales" readonly>
    <button onclick="guardarLote()">ğŸ’¾ Guardar</button>
</div>
<!-- Agrega esto en el BODY despuÃ©s de la secciÃ³n de Lotes -->
<div class="seccion">
    <h2>ğŸ‘· Actividades en Lotes</h2>
    <select id="loteActividad" onchange="cargarInsumos()">
        <option>Elige un lote</option>
    </select>
    <input type="date" id="fechaActividad">
    <input type="text" id="nombreActividad" placeholder="Nombre actividad">
    <input type="number" id="jornales" placeholder="NÃºmero de jornales" oninput="calcularTotal()">
    <input type="number" step="0.01" id="valorJornal" placeholder="Valor por jornal" oninput="calcularTotal()">
    <input type="number" id="totalActividad" placeholder="Total" readonly>
    <button onclick="guardarActividad()">ğŸ’¾ Guardar</button>
    
    <table id="tablaActividades">
        <tr><th>Lote</th><th>Actividad</th><th>Total</th><th>Acciones</th></tr>
    </table>
</div>

<div class="seccion">
    <h2>ğŸ“¦ Usar Insumos en Lotes</h2>
    <select id="loteUso">
        <option>Elige un lote</option>
    </select>
    <select id="insumoUso">
        <option>Elige insumo</option>
    </select>
    <input type="number" step="0.01" id="cantidadUso" placeholder="Cantidad a usar">
    <button onclick="usarInsumo()">â– Usar</button>
</div>

<script>
// ğŸ§™â™‚ï¸ VARIABLES MÃGICAS
let actividades = [];
let usandoInsumoEditIndex = -1;

// ğŸ  FUNCIONES NUEVAS
function calcularTotal() {
    let jornales = parseFloat(document.getElementById('jornales').value) || 0;
    let valor = parseFloat(document.getElementById('valorJornal').value) || 0;
    document.getElementById('totalActividad').value = (jornales * valor).toFixed(2);
}

function guardarActividad() {
    let nuevaActividad = {
        lote: document.getElementById('loteActividad').value,
        fecha: document.getElementById('fechaActividad').value,
        nombre: document.getElementById('nombreActividad').value,
        jornales: document.getElementById('jornales').value,
        valor: document.getElementById('valorJornal').value,
        total: document.getElementById('totalActividad').value
    };
    
    if(usandoInsumoEditIndex > -1) {
        actividades[usandoInsumoEditIndex] = nuevaActividad; // âœï¸ Editar
        usandoInsumoEditIndex = -1;
    } else {
        actividades.push(nuevaActividad); // ğŸ†• Nueva
    }
    
    actualizarActividades();
}

function actualizarActividades() {
    let tabla = document.getElementById('tablaActividades');
    tabla.innerHTML = '<tr><th>Lote</th><th>Actividad</th><th>Total</th><th>Acciones</th></tr>';
    
    actividades.forEach((act, index) => {
        tabla.innerHTML += `
            <tr>
                <td>${act.lote}</td>
                <td>${act.nombre}</td>
                <td>$${act.total}</td>
                <td>
                    <button onclick="editarActividad(${index})">âœï¸</button>
                    <button onclick="eliminarActividad(${index})">ğŸ—‘ï¸</button>
                </td>
            </tr>`;
    });
}

function editarActividad(index) {
    let act = actividades[index];
    document.getElementById('loteActividad').value = act.lote;
    document.getElementById('fechaActividad').value = act.fecha;
    document.getElementById('nombreActividad').value = act.nombre;
    document.getElementById('jornales').value = act.jornales;
    document.getElementById('valorJornal').value = act.valor;
    usandoInsumoEditIndex = index;
}

function eliminarActividad(index) {
    if(confirm("Â¿Borrar esta actividad?")) {
        actividades.splice(index, 1);
        actualizarActividades();
    }
}

// ğŸ§ª FUNCIÃ“N PARA USAR INSUMOS
function usarInsumo() {
    let insumo = document.getElementById('insumoUso').value;
    let cantidad = parseFloat(document.getElementById('cantidadUso').value);
    
    if(bodega[insumo] >= cantidad) {
        bodega[insumo] -= cantidad;
        alert(`âœ… Usaste ${cantidad} de ${insumo}`);
        actualizarBodega();
    } else {
        alert("ğŸš¨ Â¡No hay suficiente en bodega!");
    }
}

// ğŸ¡ ACTUALIZAR LISTAS MÃGICAS
function cargarInsumos() {
    let select = document.getElementById('insumoUso');
    select.innerHTML = '<option>Elige insumo</option>';
    
    for(let insumo in bodega) {
        select.innerHTML += `<option>${insumo}</option>`;
    }
}

// ğŸ INICIAR EL JUEGO
window.onload = function() {
    actualizarBodega();
    cargarInsumos();
};
<script>
// ğŸ‰ NUESTRAS VARIABLES MÃGICAS
let bodega = {};
let lotes = [];

// ğŸ›’ FUNCIÃ“N PARA COMPRAR JUGUETES (INSUMOS)
function comprarInsumo() {
    const insumo = document.getElementById('insumo').value;
    const cantidad = parseFloat(document.getElementById('cantidadCompra').value);
    
    if(bodega[insumo]) {
        bodega[insumo] += cantidad; // Si ya tenemos, sumamos
    } else {
        bodega[insumo] = cantidad;  // Si no, creamos nuevo
    }
    
    actualizarBodega();
}

// ğŸ“¦ ACTUALIZAR BODEGA (como limpiar y ordenar juguetes)
function actualizarBodega() {
    const tabla = document.getElementById('tablaBodega');
    tabla.innerHTML = '<tr><th>Insumo</th><th>Cantidad</th></tr>';
    
    for(let juguete in bodega) {
        tabla.innerHTML += `<tr><td>${juguete}</td><td>${bodega[juguete].toFixed(2)}</td></tr>`;
    }
}

// ğŸŒ± CALCULAR PLANTITAS (Â¡AquÃ­ estÃ¡ la magia!)
function calcularPlantas() {
    const area = parseFloat(document.getElementById('areaLote').value) || 0;
    const calles = parseFloat(document.getElementById('distanciaCalles').value) || 0;
    const plantas = parseFloat(document.getElementById('distanciaPlantas').value) || 0;
    
    if(calles > 0 && plantas > 0) {
        const densidad = 10000 / (calles * plantas); // Â¡Convertimos ha a mÂ²!
        document.getElementById('densidad').value = densidad.toFixed(2);
        document.getElementById('numPlantas').value = (area * densidad).toFixed(0);
    }
}

// ğŸ’¾ GUARDAR LOTES (como guardar tus dibujos)
function guardarLote() {
    const nuevoLote = {
        numero: document.getElementById('numLote').value,
        area: document.getElementById('areaLote').value,
        densidad: document.getElementById('densidad').value,
        plantas: document.getElementById('numPlantas').value
    };
    
    lotes.push(nuevoLote);
    alert('âœ… Â¡Lote guardado!');
}
</script>

</body>
</html>
