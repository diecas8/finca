<!-- Esto es como tu cuaderno mágico ✨ -->
<!DOCTYPE html>
<html>
<head>
    <title>Finca Café Mágico 🌱</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .seccion { background: #e0f7fa; padding: 20px; margin: 10px; border-radius: 10px; }
        input, button { margin: 5px; padding: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #4CAF50; padding: 8px; }
    </style>
<head>
    <title>Finca Café Mágico 🌱</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .seccion { background: #e0f7fa; padding: 20px; margin: 10px; border-radius: 10px; }
        
        /* ▼▼▼ NUEVO CÓDIGO PEGADO AQUÍ ▼▼▼ */
        .columnas-magicas {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        label {
            display: block;
            margin: 10px 0 5px;
            color: #2e7d32;
            font-weight: bold;
        }
        /* ▲▲▲ FIN DEL NUEVO CÓDIGO ▲▲▲ */
        
        input, button { margin: 5px; padding: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    </style>
</head>

<!-- ▼▼▼ PEGA ESTE BLOQUE AL PRINCIPIO ▼▼▼ -->
<!-- ▼▼▼ PEGA ESTE BLOQUE AL PRINCIPIO ▼▼▼ -->
<div class="seccion">
    <h2>📋 Información de la Finca</h2>
    <form onsubmit="guardarFinca(event)">
        <div class="columnas-magicas">
            <div>
                <label>Nombre de la finca:</label>
                <input type="text" id="nombreFinca" required>
                
                <label>Área total (hectáreas):</label>
                <input type="number" step="0.01" id="areaTotal" required>
                
                <label>Propietario:</label>
                <input type="text" id="propietario" required>
            </div>
            
            <div>
                <label>Vereda:</label>
                <input type="text" id="vereda" required>
                
                <label>Municipio:</label>
                <input type="text" id="municipio" required>
                
                <label>Área en café (auto):</label>
                <input type="number" step="0.01" id="areaCafe" readonly>
            </div>
        </div>
        <button type="submit">💾 Guardar</button>
    </form>
</div>
<!-- ▲▲▲ HASTA AQUÍ ▲▲▲ --><!-- ▲▲▲ HASTA AQUÍ ▲▲▲ -->
<!-- TIENDA DE JUGUETES: Insumos -->
<div class="seccion">
    <h2>🛒 Compras de Insumos</h2>
    <input type="date" id="fechaCompra">
    <input type="text" id="insumo" placeholder="Nombre del insumo">
    <input type="number" step="0.01" id="cantidadCompra" placeholder="Cantidad">
    <button onclick="comprarInsumo()">🛒 Agregar</button>
</div>

<!-- ▼▼▼ PEGA ESTE BLOQUE EN VEZ DE LA VIEJA BODEGA ▼▼▼ -->
<div class="seccion">
    <h2>📦 Bodega de Insumos (Mejorada)</h2>
    <table id="tablaBodega">
        <tr>
            <th>Insumo</th>
            <th>Unidad</th>
            <th>En Stock</th>
            <th>Última Compra</th>
            <th>Total Usado</th>
            <th>Disponible</th>
        </tr>
    </table>
</div>
<!-- ▲▲▲ HASTA AQUÍ ▲▲▲ -->

<!-- LOTES DE JUEGO -->
<div class="seccion">
    <h2>🌱 Lotes de Café</h2>
    <input type="text" id="numLote" placeholder="Número de lote">
    <input type="number" step="0.01" id="areaLote" placeholder="Área (ha)" oninput="calcularPlantas()">
    <input type="number" step="0.01" id="distanciaCalles" placeholder="Distancia calles (m)" oninput="calcularPlantas()">
    <input type="number" step="0.01" id="distanciaPlantas" placeholder="Distancia plantas (m)" oninput="calcularPlantas()">
    <input type="text" id="densidad" placeholder="Densidad" readonly>
    <input type="text" id="numPlantas" placeholder="Plantas totales" readonly>
    <button onclick="guardarLote()">💾 Guardar</button>
</div>
<!-- Agrega esto en el BODY después de la sección de Lotes -->
<div class="seccion">
    <h2>👷 Actividades en Lotes</h2>
    <select id="loteActividad" onchange="cargarInsumos()">
        <option>Elige un lote</option>
    </select>
    <input type="date" id="fechaActividad">
    <input type="text" id="nombreActividad" placeholder="Nombre actividad">
    <input type="number" id="jornales" placeholder="Número de jornales" oninput="calcularTotal()">
    <input type="number" step="0.01" id="valorJornal" placeholder="Valor por jornal" oninput="calcularTotal()">
    <input type="number" id="totalActividad" placeholder="Total" readonly>
    <button onclick="guardarActividad()">💾 Guardar</button>
    
    <table id="tablaActividades">
        <tr><th>Lote</th><th>Actividad</th><th>Total</th><th>Acciones</th></tr>
    </table>
</div>

<div class="seccion">
    <h2>📦 Usar Insumos en Lotes</h2>
    <select id="loteUso">
        <option>Elige un lote</option>
    </select>
    <select id="insumoUso">
        <option>Elige insumo</option>
    </select>
    <input type="number" step="0.01" id="cantidadUso" placeholder="Cantidad a usar">
    <button onclick="usarInsumo()">➖ Usar</button>
</div>

 <!-- ▼▼▼ PEGA AQUÍ EL NUEVO SCRIPT ▼▼▼ -->
    <script>
        // ▼▼▼ Variables Mágicas ▼▼▼
        let datosFinca = {
            nombre: "",
            areaTotal: 0,
            propietario: "",
            vereda: "",
            municipio: ""
        };

        // ▼▼▼ Función para Guardar ▼▼▼
        function guardarFinca(event) {
            event.preventDefault();
            
            datosFinca = {
                nombre: document.getElementById('nombreFinca').value,
                areaTotal: parseFloat(document.getElementById('areaTotal').value),
                propietario: document.getElementById('propietario').value,
                vereda: document.getElementById('vereda').value,
                municipio: document.getElementById('municipio').value
            };
            
            localStorage.setItem('datosFinca', JSON.stringify(datosFinca));
            alert("✅ ¡Información guardada!");
        }

        // ▼▼▼ Función Automática ▼▼▼
        function actualizarAreaCafe() {
            const total = lotes.reduce((sum, lote) => sum + parseFloat(lote.area), 0);
            document.getElementById('areaCafe').value = total.toFixed(2);
        }
    </script>
    <!-- ▲▲▲ Fin del nuevo script ▲▲▲ -->

</body>
</html>
